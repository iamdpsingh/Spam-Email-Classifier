<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics Dashboard - Spam Email Classifier</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìä Analytics Dashboard</h1>
            <p>Comprehensive analysis of email patterns and model performance</p>
            <div class="nav-links">
                <a href="/" class="nav-link">üè† Home</a>
                <a href="/analytics" class="nav-link active">üìä Analytics</a>
                <a href="/about" class="nav-link">‚ÑπÔ∏è About</a>
            </div>
        </header>

        <main class="analytics-main">
            {% if text_analysis_exists %}
            <section class="analytics-section">
                <h2>üìà Comprehensive Text Analysis</h2>
                <div class="chart-container">
                    <img src="{{ url_for('static', filename='images/text_analysis.png') }}" 
                         alt="Comprehensive Text Analysis" class="analysis-chart">
                </div>
                <div class="description">
                    <p>This comprehensive analysis reveals key patterns that distinguish spam from legitimate emails:</p>
                    <ul>
                        <li><strong>Word Frequency:</strong> Most common words in spam vs ham emails</li>
                        <li><strong>Text Length:</strong> Distribution of email lengths by category</li>
                        <li><strong>Punctuation Patterns:</strong> Usage of exclamation marks and question marks</li>
                        <li><strong>Writing Style:</strong> Capital letters ratio and average word length</li>
                    </ul>
                </div>
            </section>
            {% endif %}

            {% if word_frequency_exists %}
            <section class="analytics-section">
                <h2>üìù Word Frequency Analysis</h2>
                <div class="chart-container">
                    <img src="{{ url_for('static', filename='images/word_frequency.png') }}" 
                         alt="Word Frequency Analysis" class="analysis-chart">
                </div>
                <div class="description">
                    <p>Detailed comparison of the most frequent words in spam and legitimate emails. 
                    Notice how spam emails contain more promotional and urgency-related terms, while 
                    legitimate emails use more conversational and business-related language.</p>
                </div>
            </section>
            {% endif %}

            {% if model_comparison_exists %}
            <section class="analytics-section">
                <h2>ü§ñ Model Performance Comparison</h2>
                <div class="chart-container">
                    <img src="{{ url_for('static', filename='images/model_comparison.png') }}" 
                         alt="Model Performance Comparison" class="analysis-chart">
                </div>
                <div class="description">
                    <p>Comparison of different machine learning algorithms used in this project. 
                    The system automatically selects the best-performing model based on accuracy metrics.</p>
                </div>
            </section>
            {% endif %}

            {% if confusion_matrix_exists %}
            <section class="analytics-section">
                <h2>üéØ Confusion Matrix</h2>
                <div class="chart-container">
                    <img src="{{ url_for('static', filename='images/confusion_matrix.png') }}" 
                         alt="Confusion Matrix" class="analysis-chart">
                </div>
                <div class="description">
                    <p>The confusion matrix shows the model's classification accuracy. Higher numbers on the 
                    diagonal indicate better performance, with minimal false positives and false negatives.</p>
                </div>
            </section>
            {% endif %}

            {% if not text_analysis_exists and not confusion_matrix_exists %}
            <section class="analytics-section">
                <div class="no-data">
                    <h2>‚ö†Ô∏è No Analytics Available</h2>
                    <p>The analytics charts haven't been generated yet. Please train the model first:</p>
                    <div class="code-block">
                        <code>python model.py</code>
                    </div>
                    <p>This will generate all the necessary analysis charts and train the machine learning models.</p>
                </div>
            </section>
            {% endif %}

            <section class="analytics-section">
                <h2>üìã Technical Details</h2>
                <div class="tech-details">
                    <div class="detail-card">
                        <h3>üõ†Ô∏è Preprocessing Pipeline</h3>
                        <ul>
                            <li>Text normalization and cleaning</li>
                            <li>Removal of URLs, emails, and phone numbers</li>
                            <li>Stopword removal and stemming</li>
                            <li>TF-IDF vectorization</li>
                        </ul>
                    </div>
                    <div class="detail-card">
                        <h3>ü§ñ Machine Learning Models</h3>
                        <ul>
                            <li>Multinomial Naive Bayes</li>
                            <li>Logistic Regression with hyperparameter tuning</li>
                            <li>Random Forest Classifier</li>
                            <li>Automatic best model selection</li>
                        </ul>
                    </div>
                    <div class="detail-card">
                        <h3>üìä Performance Metrics</h3>
                        <ul>
                            <li>Accuracy Score</li>
                            <li>Precision and Recall</li>
                            <li>F1-Score</li>
                            <li>Confusion Matrix Analysis</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>Built with ‚ù§Ô∏è using Python, Flask, scikit-learn & Advanced NLP</p>
            <p>¬© 2025 Spam Email Classifier Project</p>
        </footer>
    </div>
</body>
</html>
